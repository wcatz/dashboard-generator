{{define "content"}}
<h1 class="text-xl font-bold mb-1">config editor</h1>
<p class="text-sm text-base-content/50 mb-6">edit your YAML configuration</p>

<div class="card bg-base-100 border border-base-content/10 mb-4">
  <div class="card-body p-5">
    <div class="flex justify-between items-center mb-3">
      <h3 class="card-title text-sm">{{.ConfigPath}}</h3>
      <div class="flex gap-2">
        <button class="btn btn-xs btn-outline" hx-post="/api/config/reload" hx-target="#editor-status" hx-disabled-elt="this">reload</button>
        <button class="btn btn-xs btn-primary" id="save-btn" hx-post="/api/config/save" hx-include="#yaml-editor" hx-target="#editor-status" hx-disabled-elt="this">save</button>
      </div>
    </div>
    <div id="editor-status" class="text-xs mb-2"></div>
    <textarea id="yaml-editor" name="content" class="textarea textarea-bordered w-full min-h-[600px] font-mono text-xs leading-relaxed bg-base-200 resize-y" style="tab-size: 2;">{{.Content}}</textarea>
  </div>
</div>

<div class="card bg-base-100 border border-base-content/10">
  <div class="card-body p-5">
    <h3 class="card-title text-sm">validation</h3>
    <button class="btn btn-xs btn-outline" hx-post="/api/config/validate" hx-include="#yaml-editor" hx-target="#validate-result" hx-indicator="#validate-spinner" hx-disabled-elt="this">
      validate <span id="validate-spinner" class="htmx-indicator"><span class="spinner"></span></span>
    </button>
    <div id="validate-result" class="mt-3 text-sm"></div>
  </div>
</div>
{{end}}
