{{define "content"}}
<h1>config editor</h1>
<p class="subtitle">edit your YAML configuration</p>

<div class="card">
  <div class="card-header">
    <h3>{{.ConfigPath}}</h3>
    <div class="flex gap-2">
      <button class="sm outline" hx-post="/api/config/reload" hx-target="#editor-status" hx-disabled-elt="this">reload</button>
      <button class="sm" id="save-btn" hx-post="/api/config/save" hx-include="#yaml-editor" hx-target="#editor-status" hx-disabled-elt="this">save</button>
    </div>
  </div>
  <div id="editor-status" class="editor-status"></div>
  <textarea id="yaml-editor" name="content" class="code-editor">{{.Content}}</textarea>
</div>

<div class="card">
  <h3>validation</h3>
  <button class="sm outline" hx-post="/api/config/validate" hx-include="#yaml-editor" hx-target="#validate-result" hx-indicator="#validate-spinner" hx-disabled-elt="this">
    validate <span id="validate-spinner" class="htmx-indicator"><span class="spinner"></span></span>
  </button>
  <div id="validate-result" class="mt-3 text-base"></div>
</div>
{{end}}
