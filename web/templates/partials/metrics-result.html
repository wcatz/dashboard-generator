{{if .Error}}
<div class="card" style="border-color: var(--danger);">
  <span style="color: var(--danger);">error:</span> {{.Error}}
</div>
{{else if not .Metrics}}
<div class="empty-state">
  <p>no metrics found matching filter</p>
</div>
{{else}}
<div class="card">
  <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.75rem;">
    <h3 style="margin: 0;">{{.Total}} metrics</h3>
    <span style="font-size: 0.8rem; color: var(--text-muted);">from {{.Datasource}}{{if .Job}} &middot; job: {{.Job}}{{end}}</span>
  </div>
  <form hx-post="/api/metrics/snippet" hx-target="#snippet-result">
    <input type="hidden" name="datasource" value="{{.Datasource}}">
    <div class="metric-list">
      {{range .Metrics}}
      <div class="metric-item">
        <label style="display: flex; align-items: center; gap: 0.5rem; flex: 1; cursor: pointer;">
          <input type="checkbox" name="metrics" value="{{.Name}}" style="width: auto; margin: 0;">
          <div style="flex: 1;">
            <div class="name">{{.Name}}</div>
            {{if .Help}}<div class="help">{{.Help}}</div>{{end}}
          </div>
        </label>
        <div class="meta">
          <span class="badge {{.Type}}">{{.Type}}</span>
        </div>
      </div>
      {{end}}
    </div>
    <button type="submit" class="sm" style="margin-top: 0.75rem;">generate YAML snippet</button>
  </form>
  <div id="snippet-result"></div>
</div>
{{end}}
