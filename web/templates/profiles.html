{{define "content"}}
<h1 class="text-xl font-bold mb-1">profiles</h1>
<p class="text-sm text-base-content/50 mb-6">named dashboard subsets for selective generation</p>

{{if .Profiles}}
{{range .Profiles}}
<div class="card bg-base-100 border border-base-content/10 mb-4">
  <div class="card-body p-5">
    <h3 class="card-title text-sm">{{.Name}}</h3>
    <div class="flex flex-wrap gap-2">
      {{range .Dashboards}}
      <span class="badge badge-sm badge-info">{{.}}</span>
      {{end}}
    </div>
    <div class="mt-3 flex gap-2">
      <button class="btn btn-xs btn-outline" hx-post="/api/generate?profile={{.Name}}" hx-target="#profile-result-{{.Name}}" hx-indicator="#profile-spin-{{.Name}}" hx-disabled-elt="this">
        generate <span id="profile-spin-{{.Name}}" class="htmx-indicator"><span class="spinner"></span></span>
      </button>
      {{if $.GrafanaURL}}
      <button class="btn btn-xs btn-outline" hx-post="/api/push?profile={{.Name}}" hx-target="#profile-result-{{.Name}}" hx-indicator="#profile-spin-{{.Name}}" hx-disabled-elt="this">
        push to grafana
      </button>
      {{end}}
    </div>
    <div id="profile-result-{{.Name}}" class="mt-2"></div>
  </div>
</div>
{{end}}
{{else}}
<div class="text-center py-12 text-base-content/50">
  <p>no profiles defined</p>
  <p>add profiles in the <a href="/editor" class="link link-primary">config editor</a> to create dashboard subsets</p>
</div>
{{end}}
{{end}}
